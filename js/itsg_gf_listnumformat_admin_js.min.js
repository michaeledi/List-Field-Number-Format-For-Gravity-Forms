var text_number_format=itsg_gf_listnumformat_admin_js_settings.text_number_format,text_enable_number_format=itsg_gf_listnumformat_admin_js_settings.text_enable_number_format,text_currency=itsg_gf_listnumformat_admin_js_settings.text_currency,text_rounding_direction=itsg_gf_listnumformat_admin_js_settings.text_rounding_direction,text_do_not_round=itsg_gf_listnumformat_admin_js_settings.text_do_not_round,text_rounding=itsg_gf_listnumformat_admin_js_settings.text_rounding,text_range=itsg_gf_listnumformat_admin_js_settings.text_range,text_min=itsg_gf_listnumformat_admin_js_settings.text_min,text_max=itsg_gf_listnumformat_admin_js_settings.text_max,text_enable_range_instructions=itsg_gf_listnumformat_admin_js_settings.text_enable_range_instructions,text_format_currency=itsg_gf_listnumformat_admin_js_settings.text_format_currency,text_format_decimal_dot=itsg_gf_listnumformat_admin_js_settings.text_format_decimal_dot,text_format_decimal_comma=itsg_gf_listnumformat_admin_js_settings.text_format_decimal_comma,text_fixed_point=itsg_gf_listnumformat_admin_js_settings.text_fixed_point,text_enable_calculation=itsg_gf_listnumformat_admin_js_settings.text_enable_calculation,text_enable_range_calculation=itsg_gf_listnumformat_admin_js_settings.text_enable_range_calculation,text_enable_column_total=itsg_gf_listnumformat_admin_js_settings.text_enable_column_total,text_min_formula=itsg_gf_listnumformat_admin_js_settings.text_min_formula,text_max_formula=itsg_gf_listnumformat_admin_js_settings.text_max_formula,text_column_row_value=itsg_gf_listnumformat_admin_js_settings.text_column_row_value;function SetFieldChoiceNumFormat(e){var i=jQuery("#list_choice_number_enable_"+e).is(":checked"),_=jQuery("#list_choice_number_format_"+e).val(),t=jQuery("#list_choice_number_rounding_"+e).val(),n=jQuery("#list_choice_number_fixed_point_"+e).is(":checked"),o=jQuery("#list_choice_number_rounding_direction_"+e).val(),l=jQuery("#list_choice_number_range_min_"+e).val(),a=jQuery("#list_choice_number_range_max_"+e).val(),c=jQuery("#list_choice_number_range_instructions_"+e).is(":checked"),r=jQuery("#list_choice_number_enable_calculation_"+e).is(":checked"),u=jQuery("#list_choice_number_enable_range_calculation_"+e).is(":checked"),s=jQuery("#list_choice_number_column_total_"+e).is(":checked");field=GetSelectedField(),field.choices[e].isNumber=i,field.choices[e].isNumberFormat=_,field.choices[e].isNumberRounding=t,field.choices[e].isNumberFixedPoint=n,field.choices[e].isNumberRoundingDirection=o,field.choices[e].isNumberRangeMin=l,field.choices[e].isNumberRangeMax=a,field.choices[e].isNumberRangeInstructions=c,field.choices[e].isNumberEnableCalculation=r,field.choices[e].isNumberColumnTotal=s,field.choices[e].isNumberEnableRangeCalculation=u,jQuery("#list_choice_range_min_calculation_formula_"+e).val(l),jQuery("#list_choice_range_max_calculation_formula_"+e).val(a),LoadBulkChoices(field),UpdateFieldChoices(GetInputType(field)),itsg_gf_list_numformat_format_preview(),itsg_gf_list_numformat_displayed_options(e)}function itsg_gf_list_numformat_format_preview(){for(var e=0;e<field.choices.length;e++){if(1==jQuery("#list_choice_number_enable_"+e).is(":checked")){var i=void 0!==field.choices[e].isNumberFormat?field.choices[e].isNumberFormat:"decimal_dot";if("currency"==i)var _=text_format_currency;else if("decimal_comma"==i)_=text_format_decimal_comma;else _=text_format_decimal_dot;var t='<input type="text" disabled="disabled" value="'+_+'">',n=e+1;jQuery("li#field_"+field.id+" table.gfield_list_container tbody tr td:nth-child("+n+")").html(t)}}}function itsg_gf_list_numformat_displayed_options(e){var i=jQuery("#list_choice_number_rounding_"+e),_=(jQuery('label[for="list_choice_number_rounding_'+e+'"]'),jQuery("#list_choice_number_rounding_direction_"+e)),t=jQuery('label[for="list_choice_number_rounding_direction_'+e+'"]'),n=jQuery('label[for="list_choice_number_fixed_point_'+e+'"]'),o=jQuery("#list_choice_number_fixed_point_"+e),l=jQuery("#list_choice_number_format_"+e).val(),a=(jQuery("#list_choice_number_format_"+e).val(),i.find("option:selected").val()),c=jQuery("#list_choice_number_enable_calculation_"+e).prop("checked"),r=jQuery("#list_choice_number_enable_range_calculation_"+e).prop("checked");c?jQuery(".list_choice_number_options_"+e+" #calculation_options_"+e).show():jQuery(".list_choice_number_options_"+e+" #calculation_options_"+e).hide(),r?(jQuery(".list_choice_number_options_"+e+" #range_min_calculation_options_"+e).show(),jQuery(".list_choice_number_options_"+e+" #range_max_calculation_options_"+e).show(),jQuery(".list_choice_number_options_"+e+" .range_min").hide(),jQuery(".list_choice_number_options_"+e+" .range_max").hide(),jQuery("#list_choice_number_range_instructions_"+e).hide(),jQuery("label[for=list_choice_number_range_instructions_"+e+"]").removeClass("inline").hide()):(jQuery(".list_choice_number_options_"+e+" #range_min_calculation_options_"+e).hide(),jQuery(".list_choice_number_options_"+e+" #range_max_calculation_options_"+e).hide(),jQuery(".list_choice_number_options_"+e+" .range_min").show(),jQuery(".list_choice_number_options_"+e+" .range_max").show(),jQuery("#list_choice_number_range_instructions_"+e).show(),jQuery("label[for=list_choice_number_range_instructions_"+e+"]").addClass("inline").show()),"currency"==l?(n.hide(),n.removeClass("inline"),o.hide(),(a>2||1==a||"norounding"==a)&&i.val(2),i.find("option").each(function(){var e=jQuery(this),i=jQuery(this).val();(i>2||1==i||"norounding"==i)&&e.hide()})):"norounding"==a?(n.hide(),n.removeClass("inline"),o.hide(),_.hide(),t.hide()):"0"==a?(n.hide(),n.removeClass("inline"),o.hide(),_.show(),t.show(),i.find("option").each(function(){jQuery(this).show()})):(n.show(),n.addClass("inline"),o.show(),_.show(),t.show(),i.find("option").each(function(){jQuery(this).show()}))}function isNumberFormulaContentCallback(e){if("single"==e)calculationFormula="isNumberCalculationFormula",SetFieldProperty(calculationFormula,jQuery("#list_choice_calculation_formula_"+e).val().trim());else{var i=jQuery("#list_choice_calculation_formula_"+e).val().trim();field.choices[e].isNumberCalculationFormula=i;i=jQuery("#list_choice_range_min_calculation_formula_"+e).val().trim();field.choices[e].isNumberRangeMin=i,jQuery("#list_choice_number_range_min_"+e).val(i);i=jQuery("#list_choice_range_max_calculation_formula_"+e).val().trim();field.choices[e].isNumberRangeMax=i,jQuery("#list_choice_number_range_max_"+e).val(i)}}function itsg_gf_list_numformat_init(){setTimeout(function(){if("list"==field.type)if(field.enableColumns){jQuery(".list_number_settings").hide();for(var e=0;e<field.choices.length;e++){if(1==(_=field.choices[e].isNumber)){if(!jQuery(".list_choice_number_options_"+e+" #calculation_options_"+e).length){var i=jQuery("#calculation_options").prop("outerHTML").replace(/FormulaContentCallback/g,"").replace(/calculation_options/g,"calculation_options_"+e).replace(/field_calculation_formula/g,"list_choice_calculation_formula_"+e).replace(/field.calculationFormula/g,"field.choices["+e+"].isNumberCalculationFormula");jQuery(".list_choice_number_options_"+e).append(i),jQuery("#calculation_options_"+e+" a.gf_tooltip").remove(),jQuery("#calculation_options_"+e+" #list_choice_calculation_formula_"+e+"_variable_select").change(function(){isNumberFormulaContentCallback(jQuery(this).parents("div[id^='calculation_options_']").attr("id").replace("calculation_options_",""))}),jQuery("#calculation_options_"+e+" div.gf_calculation_buttons input").click(function(){isNumberFormulaContentCallback(jQuery(this).parents("div[id^='calculation_options_']").attr("id").replace("calculation_options_",""))}),jQuery("#calculation_options_"+e+" textarea#list_choice_calculation_formula_"+e).change(function(){isNumberFormulaContentCallback(jQuery(this).parents("div[id^='calculation_options_']").attr("id").replace("calculation_options_",""))}),jQuery("li#field_"+field.id+" #list_choice_calculation_formula_"+e+'_variable_select optgroup[label="Custom"]').find("option").each(function(){""===jQuery(this).val()||-1!=jQuery(this).val().indexOf(":"+field.id+".")&&-1!=jQuery(this).text().indexOf("("+text_column_row_value+")")||jQuery(this).remove()}),jQuery("#calculation_options_"+e+" #field_calculation_rounding").remove(),jQuery("#calculation_options_"+e+' label[for="field_calculation_rounding"]').remove(),jQuery("<input>").attr({type:"checkbox",id:"list_choice_number_enable_calculation_"+e,onclick:"SetFieldChoiceNumFormat( "+e+" )",checked:field.choices[e].isNumberEnableCalculation}).insertBefore("#calculation_options_"+e),jQuery("<label>").attr({type:"checkbox",class:"inline",for:"list_choice_number_enable_calculation_"+e}).text(text_enable_calculation).insertBefore("#calculation_options_"+e),jQuery("#calculation_options_"+e).css("height","auto"),jQuery("#calculation_options_"+e+" textarea#list_choice_calculation_formula_"+e).css("height","80px")}if(!jQuery(".list_choice_number_options_"+e+" #range_min_calculation_options_"+e).length){i=jQuery("#calculation_options").prop("outerHTML").replace(/FormulaContentCallback/g,"").replace(/calculation_options/g,"range_min_calculation_options_"+e).replace(/field_calculation_formula/g,"list_choice_range_min_calculation_formula_"+e).replace(/field.calculationFormula/g,"field.choices["+e+"].isNumberRangeMin");jQuery(".list_choice_number_options_"+e+" div.range").append(i),jQuery("#range_min_calculation_options_"+e+" a.gf_tooltip").remove(),jQuery("#range_min_calculation_options_"+e+" label").text(text_min_formula),jQuery("#range_min_calculation_options_"+e+" #list_choice_range_min_calculation_formula_"+e+"_variable_select").change(function(){isNumberFormulaContentCallback(jQuery(this).parents("div[id^='range_min_calculation_options_']").attr("id").replace("range_min_calculation_options_",""))}),jQuery("#range_min_calculation_options_"+e+" div.gf_calculation_buttons input").click(function(){isNumberFormulaContentCallback(jQuery(this).parents("div[id^='range_min_calculation_options_']").attr("id").replace("range_min_calculation_options_",""))}),jQuery("#range_min_calculation_options_"+e+" textarea#list_choice_range_min_calculation_formula_"+e).change(function(){isNumberFormulaContentCallback(jQuery(this).parents("div[id^='range_min_calculation_options_']").attr("id").replace("range_min_calculation_options_",""))}),jQuery("#list_choice_range_min_calculation_formula_"+e+'_variable_select optgroup[label="Allowable form fields"]').remove(),jQuery("li#field_"+field.id+" #list_choice_range_min_calculation_formula_"+e+"_variable_select").find("option").each(function(){""===jQuery(this).val()||-1!=jQuery(this).val().indexOf(":"+field.id+".")&&-1!=jQuery(this).text().indexOf("("+text_column_row_value+")")||jQuery(this).remove()}),jQuery("#range_min_calculation_options_"+e+" #field_calculation_rounding").remove(),jQuery("#range_min_calculation_options_"+e+' label[for="field_calculation_rounding"]').remove();i=jQuery("#calculation_options").prop("outerHTML").replace(/FormulaContentCallback/g,"").replace(/calculation_options/g,"range_max_calculation_options_"+e).replace(/field_calculation_formula/g,"list_choice_range_max_calculation_formula_"+e).replace(/field.calculationFormula/g,"field.choices["+e+"].isNumberRangeMax");jQuery(".list_choice_number_options_"+e+" div.range").append(i),jQuery("#range_max_calculation_options_"+e+" a.gf_tooltip").remove(),jQuery("#range_max_calculation_options_"+e+" label").text(text_max_formula),jQuery("#range_max_calculation_options_"+e+" #list_choice_range_max_calculation_formula_"+e+"_variable_select").change(function(){isNumberFormulaContentCallback(jQuery(this).parents("div[id^='range_max_calculation_options_']").attr("id").replace("range_max_calculation_options_",""))}),jQuery("#range_max_calculation_options_"+e+" div.gf_calculation_buttons input").click(function(){isNumberFormulaContentCallback(jQuery(this).parents("div[id^='range_max_calculation_options_']").attr("id").replace("range_max_calculation_options_",""))}),jQuery("#range_max_calculation_options_"+e+" textarea#list_choice_range_max_calculation_formula_"+e).change(function(){isNumberFormulaContentCallback(jQuery(this).parents("div[id^='range_max_calculation_options_']").attr("id").replace("range_max_calculation_options_",""))}),jQuery("#list_choice_range_max_calculation_formula_"+e+'_variable_select optgroup[label="Allowable form fields"]').remove(),jQuery("li#field_"+field.id+" #list_choice_range_max_calculation_formula_"+e+"_variable_select").find("option").each(function(){""===jQuery(this).val()||-1!=jQuery(this).val().indexOf(":"+field.id+".")&&-1!=jQuery(this).text().indexOf("("+text_column_row_value+")")||jQuery(this).remove()}),jQuery("#range_max_calculation_options_"+e+" #field_calculation_rounding").remove(),jQuery("#range_max_calculation_options_"+e+' label[for="field_calculation_rounding"]').remove(),jQuery("<input>").attr({type:"checkbox",id:"list_choice_number_enable_range_calculation_"+e,onclick:"SetFieldChoiceNumFormat( "+e+" )",checked:field.choices[e].isNumberEnableCalculation}).insertBefore("#range_min_calculation_options_"+e),jQuery("<label>").attr({type:"checkbox",class:"inline",for:"list_choice_number_enable_range_calculation_"+e}).text(text_enable_range_calculation).insertBefore("#range_min_calculation_options_"+e),jQuery("#range_min_calculation_options_"+e).css("height","auto"),jQuery("#range_min_calculation_options_"+e+" textarea#list_choice_range_max_calculation_formula_"+e).css("height","80px")}jQuery(".list_choice_number_options_"+e).show();var _=void 0!==field.choices[e].isNumber&&field.choices[e].isNumber,t=void 0!==field.choices[e].isNumberFormat?field.choices[e].isNumberFormat:"decimal_dot",n=void 0!==field.choices[e].isNumberRounding?field.choices[e].isNumberRounding:"norounding",o=void 0!==field.choices[e].isNumberFixedPoint&&field.choices[e].isNumberFixedPoint,l=void 0!==field.choices[e].isNumberRoundingDirection?field.choices[e].isNumberRoundingDirection:"roundclosest",a=void 0!==field.choices[e].isNumberRangeMin?field.choices[e].isNumberRangeMin:"",c=void 0!==field.choices[e].isNumberRangeMax?field.choices[e].isNumberRangeMax:"",r=void 0!==field.choices[e].isNumberEnableCalculation&&field.choices[e].isNumberEnableCalculation,u=void 0!==field.choices[e].isNumberEnableRangeCalculation&&field.choices[e].isNumberEnableRangeCalculation,s=void 0!==field.choices[e].isNumberCalculationFormula?field.choices[e].isNumberCalculationFormula:"";jQuery("#field_columns #list_choice_number_enable_"+e).prop("checked",_),jQuery("#field_columns #list_choice_number_format_"+e).val(t),jQuery("#field_columns #list_choice_number_rounding_"+e).val(n),jQuery("#field_columns #list_choice_number_fixed_point_"+e).prop("checked",o),jQuery("#field_columns #list_choice_number_rounding_direction_"+e).val(l),jQuery("#field_columns #list_choice_number_range_min_"+e).val(a),jQuery("#field_columns #list_choice_number_range_max_"+e).val(c),jQuery("#field_columns #list_choice_number_enable_calculation_"+e).prop("checked",r),jQuery("#field_columns #list_choice_number_enable_range_calculation_"+e).prop("checked",u),jQuery("#field_columns #list_choice_calculation_formula_"+e).val(s),jQuery("#field_columns #list_choice_range_min_calculation_formula_"+e).val(a),jQuery("#field_columns #list_choice_range_max_calculation_formula_"+e).val(c),itsg_gf_list_numformat_displayed_options(e)}else jQuery(".list_choice_number_options_"+e).hide()}}else{e="single";jQuery(".list_number_settings").show();_=void 0!==field.isNumber&&field.isNumber,t=void 0!==field.isNumberFormat?field.isNumberFormat:"decimal_dot",n=void 0!==field.isNumberRounding?field.isNumberRounding:"norounding",o=void 0!==field.isNumberFixedPoint&&field.isNumberFixedPoint,l=void 0!==field.isNumberRoundingDirection?field.isNumberRoundingDirection:"roundclosest",a=void 0!==field.isNumberRangeMin?field.isNumberRangeMin:"",c=void 0!==field.isNumberRangeMax?field.isNumberRangeMax:"";var m=void 0===field.isNumberRangeInstructions||field.isNumberRangeInstructions,d=void 0===field.isNumberColumnTotal||field.isNumberColumnTotal;jQuery("#field_settings .list_number_settings #list_number_enable").prop("checked",_),jQuery("#field_settings .list_number_settings #list_choice_number_format_single").val(t),jQuery("#field_settings .list_number_settings #list_choice_number_rounding_single").val(n),jQuery("#field_settings .list_number_settings #list_choice_number_fixed_point_single").prop("checked",o),jQuery("#field_settings .list_number_settings #list_choice_number_rounding_single_direction").val(l),jQuery("#field_settings .list_number_settings #list_choice_number_range_min_single").val(a),jQuery("#field_settings .list_number_settings #list_choice_number_range_max_single").val(c),jQuery("#field_settings .list_number_settings #list_choice_number_range_instructions_single").prop("checked",m),jQuery("#field_settings .list_number_settings #list_choice_number_column_total_single").prop("checked",d),field.isNumber?(jQuery(".list_choice_number_options_"+e).show(),itsg_gf_list_numformat_displayed_options(e)):jQuery(".list_choice_number_options_"+e).hide()}},50)}!function(e){var i=e.GetFieldChoices;e.GetFieldChoices=function(){var e=i.apply(this,[field]);if(null==field.choices)return"";for(var _=0;_<field.choices.length;_++){var t=GetInputType(field),n=field.choices[_].isNumber?"checked":"",o=field.choices[_].isNumberFixedPoint?"checked":"",l=void 0===field.choices[_].isNumberRangeInstructions||field.choices[_].isNumberRangeInstructions?"checked":"",a=field.choices[_].isNumberColumnTotal?"checked":"",c=field.enableChoiceValue?String(field.choices[_].value):field.choices[_].text;"list"==t&&(0==_&&(e+="<p><strong>"+text_number_format+"</strong></p>"),e+="<div>",e+="<input type='checkbox' name='choice_number_enable' id='list_choice_number_enable_"+_+"' "+n+" onclick='SetFieldChoiceNumFormat( "+_+" );itsg_gf_list_numformat_init();' /> ",e+="<label class='inline' for='list_choice_number_enable_"+_+"'>"+c+" - "+text_enable_number_format+"</label>",e+="<div style='display:none; background: rgb(244, 244, 244) none repeat scroll 0px 0px; padding: 10px; border-bottom: 1px solid grey; margin: 10px 0;' class='list_choice_number_options_"+_+"'>",e+="<div style='clear: both;'>",e+="<label class='section_label' for='list_choice_number_format_"+_+"'>",e+=text_number_format+"</label>",e+="</div>",e+="<select class='choice_number_format' id='list_choice_number_format_"+_+"' onchange='SetFieldChoiceNumFormat( "+_+" );' style='margin-bottom: 10px;' >",e+="<option value='decimal_dot'>9,999.99</option>",e+="<option value='decimal_comma'>9.999,99</option>",e+="<option value='decimal_none'>9999.99</option>",e+="<option value='currency'>"+text_currency+"</option>",e+="</select>",e+="<div style='clear: both;'>",e+="<label class='section_label' for='list_choice_number_rounding_"+_+"'>",e+=text_rounding+"</label>",e+="</div>",e+="<select class='choice_number_rounding' id='list_choice_number_rounding_"+_+"' onchange='SetFieldChoiceNumFormat( "+_+" );' style='margin-bottom: 10px;' >",e+="<option value='norounding'>Do not round</option>",e+="<option value='0'>0</option>",e+="<option value='1'>1</option>",e+="<option value='2'>2</option>",e+="<option value='3'>3</option>",e+="<option value='4'>4</option>",e+="<option value='5'>5</option>",e+="</select>",e+="<br>",e+="<input type='checkbox' id='list_choice_number_fixed_point_"+_+"' "+o+" onclick='SetFieldChoiceNumFormat( "+_+" );' /> ",e+="<label class='inline' for='list_choice_number_fixed_point_"+_+"'>"+text_fixed_point+"</label>",e+="<br>",e+="<br>",e+="<div style='clear: both;'>",e+="<label class='section_label' for='list_choice_number_rounding_direction_"+_+"'>",e+=text_rounding_direction+"</label>",e+="</div>",e+="<select class='choice_number_rounding_direction' id='list_choice_number_rounding_direction_"+_+"' onchange='SetFieldChoiceNumFormat( "+_+" ); itsg_gf_list_numformat_init();' style='margin-bottom: 10px;' >",e+="<option value='roundclosest'>Round closest</option>",e+="<option value='roundup'>Round up</option>",e+="<option value='rounddown'>Round down</option>",e+="</select>",e+="<br>",e+="<div style='clear: both;'>",e+="<label class='section_label'>"+text_range+"</label>",e+="</div>",e+="<div class='range'>",e+="<div class='range_min'>",e+="<input type='text' id='list_choice_number_range_min_"+_+"' onchange='SetFieldChoiceNumFormat( "+_+" );' >",e+="<label for='list_choice_number_range_min_"+_+"'>",e+=text_min+"</label>",e+="</div>",e+="<div class='range_max'>",e+="<input type='text' id='list_choice_number_range_max_"+_+"' onchange='SetFieldChoiceNumFormat( "+_+" );' >",e+="<label for='list_choice_number_range_max_"+_+"'>",e+=text_max+"</label>",e+="</div>",e+="<br>",e+="</div>",e+="<br>",e+="<input type='checkbox' id='list_choice_number_range_instructions_"+_+"' "+l+" onclick='SetFieldChoiceNumFormat( "+_+" );' >",e+="<label type='checkbox' class='inline' for='list_choice_number_range_instructions_"+_+"'>"+text_enable_range_instructions+"</label>",e+="<br>",e+="<br>",e+="<input type='checkbox' id='list_choice_number_column_total_"+_+"' "+a+" onclick='SetFieldChoiceNumFormat( "+_+" );' >",e+="<label type='checkbox' class='inline' for='list_choice_number_column_total_"+_+"'>"+text_enable_column_total+"</label>",e+="<br>",e+="</div>",e+="</div>")}return itsg_gf_list_numformat_init(),e}}(window||{}),jQuery(document).on("change","#gfield_settings_columns_container #field_columns li.field-choice-row",function(){itsg_gf_list_numformat_init()}),jQuery(document).on("change","#field_settings input[id=field_columns_enabled]",function(){itsg_gf_list_numformat_init()}),jQuery(document).bind("gform_load_field_settings",function(e,i,_){itsg_gf_list_numformat_init(),setTimeout(function(){"list"!=i.type&&jQuery("li#field_"+i.id+" #field_calculation_formula_variable_select").find("option").each(function(){""!==jQuery(this).val()&&-1!=jQuery(this).text().indexOf("("+text_column_row_value+")")&&jQuery(this).remove()})},50)});